{% extends 'base.html' %}
{% block content %}
<style>
  .main-content {
    max-width: 1100px;
    margin: 40px auto;
    padding: 1rem 1.5rem;
    /* Removed background, border-radius, box-shadow for clean minimal look */
    background: transparent !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }
  h2 {
    font-weight: 700;
    color: #1969ff;
    margin-bottom: 1.7rem;
  }
  form.search-form {
    margin-bottom: 18px;
    display: flex;
    align-items: center;
    gap: 10px;
    max-width: 600px;
  }
  form.search-form input[type="text"] {
    padding: 7px 11px;
    width: 100%;
    border-radius: 7px;
    border: 1px solid #d1d5db;
    font-size: 1rem;
  }
  form.search-form button {
    padding: 7px 20px;
    font-weight: 600;
  }
  form.search-form a.add-btn {
    margin-left: auto;
  }
  table {
    width: 100%;
    background: transparent !important; /* no white bg */
  }
  thead tr {
    background: #f8fafd; /* subtle header background */
  }
  tbody tr:hover {
    background: #f1f5fb; /* subtle hover effect */
  }
  th, td {
    vertical-align: middle !important;
  }
  a.btn-sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.85rem;
  }
</style>

<div class="main-content">
  <h2>Patient List</h2>

  <form method="GET" action="{{ url_for('view_patients') }}" class="search-form">
    <input type="text" name="q" placeholder="Search by name..." value="{{ query }}">
    <button type="submit" class="btn btn-primary">Search</button>
    <a href="{{ url_for('add_patient') }}" class="btn btn-outline-primary add-btn" style="font-weight:700;">+ Add Patient</a>
  </form>

  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>DOB</th>
        <th>Gender</th>
        <th>PT Notes</th>
        <th>OT Notes</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      {% for p in patients %}
        <tr>
          <td>{{ p.name }}</td>
          <td>{{ p.dob.strftime('%Y-%m-%d') }}</td>
          <td>{{ p.gender }}</td>
          <td><a href="{{ url_for('view_pt_notes', patient_id=p.id) }}">View PT Notes</a></td>
          <td><a href="{{ url_for('view_ot_notes', patient_id=p.id) }}">View OT Notes</a></td>
          <td><a href="{{ url_for('edit_patient', patient_id=p.id) }}" class="btn btn-primary btn-sm">Edit</a></td>
          <td>
            <form action="{{ url_for('delete_patient', patient_id=p.id) }}" method="POST" style="display:inline;">
              <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Delete this patient?');">Delete</button>
            </form>
          </td>
        </tr>
      {% else %}
        <tr><td colspan="7">No patients found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
