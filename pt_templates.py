# pt_templates.py

PT_TEMPLATES = {
    "LBP Eval": {
        "meddiag": "",
        "history": "",
        "subjective": "Pt reports having LBP and is limiting daily functional activities. Pt would like to decrease pain and improve activity tolerance and return to PLOF. Pt agrees to PT evaluation.",
        "pain_location": "L-spine paraspinal, B QL, B gluteus medius",
        "pain_onset": "Chronic",
        "pain_condition": "Chronic",
        "pain_mechanism": "Muscle tension, stenosis, increased tone, structural changes",
        "pain_rating": "5/10, 0/10, 7/10",
        "pain_frequency": "Intermittent",
        "pain_description": "Sharp, Tense, Aching.",
        "pain_aggravating": "Sitting, standing, walking, forward bending, lifting/pulling.",
        "pain_relieved": "Pain meds prn and rest.",
        "pain_interferes": "Functional mobility, ADLs, sleep.",
        "meds": "See medication list",
        "tests": "N/A",
        "dme": "N/A",
        "plof": "Independent with mobility and ADLs",
        "posture": "Forward head lean, rounded shoulders, protracted scapular, slouch posture, decrease sitting postural awareness, loss of lumbar lordosis.",
        "rom": "Trunk Flexion: 50% limited\nTrunk Extension: 50% limited\nTrunk SB Left: 50% limited\nTrunk SB Right: 50% limited\nTrunk Rotation Left: 50% limited\nTrunk Rotation Right: 50% limited",
        "strength": "Gross Core Strength: 3/5\nGross Hip Strength: L/R  3/5; 3/5\nGross Knee Strength: L/R  3/5; 3/5\nGross Ankle Strength: L/R  3/5; 3/5",
        "palpation": "TTP: B QL, B gluteus medius, B piriformis, B paraspinal.\nJoint hypomobility: L1-L5 with central PA.\nIncreased paraspinal and gluteus medius tone",
        "functional": "Supine Sit Up Test: Unable\n30 seconds Chair Sit to Stand: 6x w/ increase LBP\nSingle Leg Balance Test: B LE: <1 sec with loss of balance.\nSingle Heel Raises Test: Unremarkable\nWalking on Toes:\nWalking on Heels:\nFunctional Squat:",
        "special": "(-) Slump Test\n(-) Unilateral SLR Test\n(-) Double SLR\n(-) Spring/Central PA\n(-) Piriformis test\n(-) SI Cluster Test",
        "impairments": "Prolonged sitting: 5 min\nStanding: 5 min\nWalking: 5 min\nBending, sweeping, cleaning, lifting: 5 min.",
        "goals": "Short-Term Goals (1–12 visits):\n1. Pt will report a reduction in low back pain to ≤1/10 to allow comfortable participation in functional activities.\n2. Pt will demonstrate a ≥10% improvement in trunk AROM to enhance mobility and reduce risk of reinjury during daily tasks.\n3. Pt will improve gross LE strength by at least 0.5 muscle grade to enhance safety during ADLs and minimize pain/injury risk.\n4. Pt will self-report ≥50% improvement in functional limitations related to ADLs.\nLong-Term Goals (13–25 visits):\n1. Pt will demonstrate B LE strength of ≥4/5 to independently and safely perform all ADLs.\n2. Pt will complete ≥14 repetitions on the 30-second chair sit-to-stand test to reduce fall risk.\n3. Pt will tolerate ≥30 minutes of activity to safely resume household tasks without limitation.\n4. Pt will demonstrate independence with HEP, using proper body mechanics and strength to support safe return to ADLs without difficulty.",
        "frequency": "1wk1, 2wk12",
        "intervention": "Manual Therapy (STM/IASTM/Joint Mob), Therapeutic Exercise, Therapeutic Activities, Neuromuscular Re-education, Gait Training, Balance Training, Pain Management Training, Modalities ice/heat 10-15min, E-Stim, Ultrasound, fall/injury prevention training, safety education/training, HEP education/training.",
        "procedures": "97161 Low Complexity\n97162 Moderate Complexity\n97163 High Complexity\n97140 Manual Therapy\n97110 Therapeutic Exercise\n97530 Therapeutic Activity\n97112 Neuromuscular Re-ed\n97116 Gait Training"
    },
    "Knee TKA Eval": {
        "meddiag": "",
        "history": "",
        "subjective": "Pt states s/p TKA and agreeable to PT evaluation. Pt reports having pain and swelling to the knee region and hasn't been using ice too much.",
        "pain_location": "Knee",
        "pain_onset": "",
        "pain_condition": "Acute",
        "pain_mechanism": "Post op swelling due to surgery",
        "pain_rating": "5/10, 3/10, 7/10",
        "pain_frequency": "Intermittent",
        "pain_description": "Sharp, Tension, Aching, dull/heaviness",
        "pain_aggravating": "Sitting, standing, walking, bed mobility.",
        "pain_relieved": "Pain meds prn, ice, rest, elevation",
        "pain_interferes": "Functional mobility, ADLs, sleep.",
        "meds": "See medication list",
        "tests": "N/A",
        "dme": "FWW",
        "plof": "Independent with mobility and ADLs.",
        "posture": "Forward head lean, rounded shoulders, protracted scapular, slouch posture, decrease sitting postural awareness, loss of lumbar lordosis.",
        "rom": "Hip Gross: WNL / WNL\nKnee Flex: \nKnee Ext:\nAnkle Gross: WNL / WNL",
        "strength": "Hip Gross: 4/5 / 4/5\nKnee Flex: 3/5* / 3/5*\nKnee Ext: 3/5* / 3/5*\nAnkle Gross: 4/5 / 4/5",
        "palpation": "TTP: B Quads, hamstring, knee swelling, warmth, tenderness periarticular",
        "functional": "Bed Mobility: SBA\n30 seconds Chair Sit to Stand: 2x w/ Knee pain\nSLB Test: Unable loss of balance\nSingle Heel Raises Test: 50% from full range, guarding at knee\nFunctional Squat: Unable",
        "special": "NT",
        "impairments": "Prolonged sitting: 5 min\nStanding: 5 min\nWalking: 5 min\nStep/stairs: 1 step",
        "goals":
            "Short-Term Goals (1–12 visits):\n"
            "1. Pt will report a reduction in knee pain to ≤1/10 to allow safe and comfortable participation in functional activities.\n"
            "2. Pt will demonstrate a ≥10% improvement in knee AROM to enhance mobility and reduce risk of reinjury during daily tasks.\n"
            "3. Pt will improve gross LE strength by at least 0.5 muscle grade to enhance safety during ADLs and minimize pain/injury risk.\n"
            "4. Pt will self-report ≥50% improvement in functional limitations related to ADLs.\n"
            "Long-Term Goals (13–25 visits):\n"
            "1. Pt will demonstrate B LE strength of ≥4/5 to independently and safely perform all ADLs.\n"
            "2. Pt will complete ≥14 repetitions on the 30-second chair sit-to-stand test to reduce fall risk.\n"
            "3. Pt will tolerate ≥30 minutes of activity to safely resume household tasks without limitation.\n"
            "4. Pt will demonstrate independence with HEP, using proper body mechanics and strength to support safe return to ADLs without difficulty.",
        "frequency": "1wk1, 2wk12",
        "intervention": "Manual Therapy (STM/IASTM/Joint Mob), Therapeutic Exercise, Therapeutic Activities, Neuromuscular Re-education, Gait Training, Balance Training, Pain Management Training, Modalities ice/heat 10-15min, E-Stim, Ultrasound, fall/injury prevention training, safety education/training, HEP education/training.",
        "procedures": "97161 Low Complexity\n97162 Moderate Complexity\n97163 High Complexity\n97140 Manual Therapy\n97110 Therapeutic Exercise\n97530 Therapeutic Activity\n97112 Neuromuscular Re-ed\n97116 Gait Training"
    },
    "Shoulder Impingement": {
        "meddiag": "",
        "history": "",
        "subjective": "Pt reports having shoulder pain and limitations with movements above shoulder level. Pt agrees to PT eval and tx.",
        "pain_location": "Shoulder",
        "pain_onset": "[DATE]",
        "pain_condition": "Chronic",
        "pain_mechanism": "AC impingement, stiffness, tension, tendonitis, possible tear/adhesion to infraspinatus/subscapularis",
        "pain_rating": "P: 5/10, B: 0/10, W: 7/10",
        "pain_frequency": "Intermittent",
        "pain_description": "tingling, stiffness, weakness, ache",
        "pain_aggravating": "lifting, reaching, pulling, prolong used",
        "pain_relieved": "Rest, pain meds prn",
        "pain_interferes": "Cooking, cleaning, don/doff clothes",
        "meds": "See medication list",
        "tests": "See MRI results",
        "dme": "None",
        "plof": "Indep with all ADLs without pain",
        "posture": "Forward head lean, rounded shoulders, protracted scapular, slouch posture, decrease sitting postural awareness. Shoulder hiking during elevation.",
        "rom": "ROM: Left / Right\nShoulder Flex: WNL/WNL\nShoulder Ext: WNL/WNL\nShoulder IR: WNL/WNL\nShoulder ER: WNL/WNL\nShoulder Abd: WNL/WNL\nShoulder Add: WNL/WNL\nGross PROM:",
        "strength": "Manual Muscle Test: Left/Right\nShoulder Flexion: 3+/5; 3+/5\nShoulder Abd: 3+/5; 3+/5\nShoulder Add: 3+/5; 3+/5\nShoulder Ext: 3+/5; 3+/5\nShoulder IR: 3+/5; 3+/5\nShoulder ER: 3+/5; 3+/5",
        "palpation": "TTP Supraspinatus, infraspinatus, teres min/major, lats, deltoids region. Stiffness/guarding w/ passive overpressure. Crepitus, clicking at the joint.",
        "functional": "Reaching above shoulder level\nReaching to high cabinet\nDon/doff on t-shirt/sweater\nCarry grocery bag/lifting",
        "special": "(+) Appley's scratch test\n(+) Painful Arc\n(+) Neer's Test\n(+) Cross-Body Adduction (Horizontal Adduction) Test\n(+) Internal Rotation Resistance Strength Test (IRRST)\n(+) Hawkin's Kennedy",
        "impairments": "Reaching above shoulder level\nReaching to high cabinet\nDon/doff on t-shirt/sweater\nCarry grocery bag/lifting",
        "goals": "Short-Term Goals (1–12 visits):\n1. Pt will report a decrease in shoulder pain to ≤1/10 to allow safe and comfortable participation in daily activities.\n2. Pt will demonstrate at least a 10% improvement in shoulder AROM to enhance functional mobility and reduce injury risk.\n\nLong-Term Goals (13–25 visits):\n1. Pt will improve gross upper extremity strength by at least 0.5 muscle grade to support ADL performance and decrease pain/injury risk.\n2. Pt will demonstrate independence with daily HEP, using proper body mechanics and sufficient strength to safely return to ADLs.\n3. Pt will increase activity tolerance to 15–20 minutes or more, allowing a safe return to household chores without limitation.\n4. Pt will demonstrate improved sitting and standing posture to reduce or prevent neck and shoulder pain, supporting a return to normal activities and ADLs.",
        "frequency": "1wk1, 2wk12",
        "intervention": "Manual Therapy (STM/IASTM/Joint Mob), Therapeutic Exercise, Therapeutic Activities, Neuromuscular Re-education, Modalities ice/heat 10-15min, E-Stim, Ultrasound, fall/injury prevention training, safety education/training, HEP education/training",
        "procedures": "97161 Low Complexity\n97162 Moderate Complexity\n97163 High Complexity\n97140 Manual Therapy\n97110 Therapeutic Exercise\n97530 Therapeutic Activity\n97112 Neuromuscular Re-ed\n97116 Gait Training"
    }
}
        
OT_TEMPLATES = {
    "ADL Decline Eval": {
        "meddiag": "",
        "history": "",
        "subjective": "Pt reports increased difficulty with ADLs and IADLs including dressing, bathing, and meal prep. Pt would like to regain independence and safety in self-care and home management tasks. Pt agrees to OT evaluation.",
        "pain_location": "Shoulder, hand, UE as relevant",
        "pain_onset": "Gradual",
        "pain_condition": "Chronic",
        "pain_mechanism": "Disuse, arthritis, neuropathy, injury",
        "pain_rating": "4/10, 2/10, 6/10",
        "pain_frequency": "Intermittent",
        "pain_description": "Aching, stiff, weak, sore",
        "pain_aggravating": "Reaching, lifting, grasping, fine motor tasks",
        "pain_relieved": "Rest, adaptive equipment, energy conservation",
        "pain_interferes": "Dressing, bathing, grooming, meal prep, cleaning",
        "meds": "See medication list",
        "tests": "9-Hole Peg Test, Box & Block Test",
        "dme": "Reacher, sock aid, grab bars, tub bench, built-up utensils",
        "plof": "Independent with all self-care and IADLs prior to decline",
        "posture": "Mild forward head, rounded shoulders, decreased sitting/standing tolerance, slouched posture during tasks",
        "rom": "UE ROM limited for overhead and behind-back movements; LE ROM WNL",
        "strength": "Grip strength: R 3/5, L 3/5; Shoulder strength: R 3+/5, L 3+/5",
        "palpation": "TTP at affected UE joints/muscles; mild swelling/stiffness, decreased tissue mobility",
        "functional": "Buttoning/unbuttoning shirt: Min A\nDonning socks/shoes: Mod A with sock aid\nBathing: SBA with tub bench\nMeal prep: Supervision; requires rest breaks\nHandwriting: Slow, decreased legibility",
        "special": "9-Hole Peg Test: 45 sec (R), 55 sec (L)\nBox & Block Test: 30 (R), 24 (L)",
        "impairments": "Limited independence in self-care (dressing, bathing)\nReduced UE ROM and strength\nDecreased fine motor coordination\nLow endurance for IADLs\nMild cognitive inefficiency with complex tasks",
        "goals":
            "Short-Term Goals (1–12 visits):\n"
            "1. Pt will complete upper body dressing with Min A or less using adaptive equipment.\n"
            "2. Pt will increase grip strength by at least 1 muscle grade to improve utensil use for feeding.\n"
            "3. Pt will perform bathing and toileting with SBA or less using adaptive devices.\n"
            "4. Pt will complete meal prep for a simple breakfast independently using rest breaks as needed.\n"
            "Long-Term Goals (13–25 visits):\n"
            "1. Pt will achieve independence in all basic ADLs using energy conservation and adaptive equipment as needed.\n"
            "2. Pt will complete all IADLs (laundry, cleaning, meal prep) without physical assistance.\n"
            "3. Pt will button/unbutton shirt independently within 30 seconds.\n"
            "4. Pt will manage medication setup safely and independently.",
        "frequency": "1wk1, 2wk12",
        "intervention": "STM, UE TherEx, TherAct, energy conservation training, adaptive equipment training (sock aid, reacher, built-up utensils), ADL/IADL simulation, fine motor/coordination training, cognitive strategy training, safety education, environmental modifications, caregiver education.",
        "procedures": "97165 OT Eval Low Complexity\n97166 OT Eval Moderate Complexity\n97167 OT Eval High Complexity\n97110 TherEx\n97530 TherAct\n97535 ADL Training\n97537 Community/Work Reintegration\n97112 Neuromuscular Re-ed"
    },
    "Shoulder Dysfunction": {
        "meddiag": "",
        "history": "",
        "subjective": "Pt reports shoulder pain and weakness impacting dressing, bathing, and reaching for household items. Pt has difficulty lifting arm overhead, reaching behind back, and carrying objects. Pt is motivated to regain independence in ADLs. Pt agrees to OT evaluation.",
        "pain_location": "Shoulder, upper arm",
        "pain_onset": "Insidious",
        "pain_condition": "Chronic",
        "pain_mechanism": "Degeneration, repetitive strain, arthritis, possible rotator cuff involvement",
        "pain_rating": "P: 4/10, B: 0/10, W: 6/10",
        "pain_frequency": "Frequent with activity",
        "pain_description": "Sharp, weak, aching",
        "pain_aggravating": "Reaching, overhead tasks, pushing/pulling",
        "pain_relieved": "Rest, positioning, adaptive equipment",
        "pain_interferes": "Dressing, grooming, laundry, cleaning, carrying groceries",
        "meds": "See medication list",
        "tests": "Functional Reach Test, 9-Hole Peg Test",
        "dme": "Reacher, dressing stick, long-handled sponge",
        "plof": "Independent with self-care and home management",
        "posture": "Rounded shoulders, mild scapular winging, decreased postural awareness during self-care",
        "rom": "Shoulder Flex: L 110°/R 135°\nShoulder Abd: L 95°/R 120°\nShoulder ER: L 35°/R 45°\nShoulder IR: L 50°/R 65°",
        "strength": "Shoulder Flex: L 3-/5; R 3+/5\nShoulder Abd: L 3-/5; R 3/5\nShoulder Ext: L 3/5; R 4-/5",
        "palpation": "TTP over anterior/lateral shoulder; mild swelling, decreased muscle bulk",
        "functional": "UB dressing: Mod A for pullover shirt\nReaching overhead: Max A\nBathing: SBA with long-handled sponge\nCarrying grocery bag: 3 lbs limited, Mod A",
        "special": "Functional Reach Test: 8 inches\n9-Hole Peg Test: Not attempted due to pain",
        "impairments": "Decreased ROM\nLimited UE strength\nImpaired functional reach\nDecreased independence in dressing/bathing\nDifficulty with overhead tasks",
        "goals":
            "Short-Term Goals (1–12 visits):\n"
            "1. Pt will don pullover shirt with SBA or less using adaptive techniques.\n"
            "2. Pt will increase shoulder flexion AROM by 20° to improve functional reach for ADLs.\n"
            "3. Pt will independently bathe upper body using long-handled sponge.\n"
            "4. Pt will carry grocery bag (5 lbs) with Mod A or less to promote home management independence.\n"
            "Long-Term Goals (13–25 visits):\n"
            "1. Pt will complete all UB and LB dressing independently using AE as needed.\n"
            "2. Pt will independently retrieve and store household items from overhead shelves.\n"
            "3. Pt will demonstrate proper body mechanics and adaptive strategies for safe home management tasks.\n"
            "4. Pt will report pain ≤1/10 during all ADLs and IADLs.",
        "frequency": "1wk1, 2wk12",
        "intervention": "UE TherEx, TherAct, STM, ADL retraining, adaptive equipment training (reacher, long-handled sponge), neuromuscular re-ed, posture training, safety education, energy conservation strategies, caregiver/family education.",
        "procedures": "97165 OT Eval Low Complexity\n97166 OT Eval Moderate Complexity\n97167 OT Eval High Complexity\n97110 TherEx\n97530 TherAct\n97535 ADL Training\n97112 Neuromuscular Re-ed"
    },
    "Hand Injury": {
        "meddiag": "",
        "history": "",
        "subjective": "Pt presents s/p hand injury with pain, weakness, and decreased fine motor ability. Pt has difficulty with buttoning, utensil use, handwriting, and other tasks requiring hand dexterity. Pt is motivated to return to PLOF for self-care, writing, and home management. Pt agrees to OT evaluation.",
        "pain_location": "Hand, fingers, wrist",
        "pain_onset": "Acute",
        "pain_condition": "Acute",
        "pain_mechanism": "Trauma, surgery, overuse",
        "pain_rating": "P: 6/10, B: 2/10, W: 8/10",
        "pain_frequency": "Variable, worse with use",
        "pain_description": "Sharp, throbbing, numbness, tingling",
        "pain_aggravating": "Gripping, pinching, fine motor, handwriting, cooking",
        "pain_relieved": "Splint use, rest, cold pack",
        "pain_interferes": "Buttoning, grooming, eating, writing, household chores",
        "meds": "See medication list",
        "tests": "Edema measurement, monofilament testing, dynamometer, pinch gauge",
        "dme": "Wrist splint, built-up utensils, adaptive writing tools",
        "plof": "Independent in all self-care, fine motor, and IADL tasks",
        "posture": "Compensatory posturing for painful hand, off-loading during tasks",
        "rom": "Wrist Flex: L 45°/R 60°\nWrist Ext: L 30°/R 50°\nMCP Flex: L 70°/R 80°",
        "strength": "Grip: L 12 lbs/R 20 lbs\nPinch: L 5 lbs/R 7 lbs",
        "palpation": "TTP over dorsal wrist and MCPs; mild edema, decreased intrinsic strength",
        "functional": "Buttoning: Max A\nHandwriting: Unable\nFeeding: Mod A\nHousehold cleaning: Max A",
        "special": "Purdue Pegboard: Unable\nJebsen Taylor: 200 sec",
        "impairments": "Limited grip/pinch strength\nDecreased fine motor skills\nImpaired independence with dressing/eating/grooming",
        "goals":
            "Short-Term Goals (1–12 visits):\n"
            "1. Pt will achieve Mod A or less for feeding and grooming tasks with adaptive equipment.\n"
            "2. Pt will button/unbutton shirt within 1 minute using AE.\n"
            "3. Pt will demonstrate safe and functional handwriting for signature using built-up pen.\n"
            "4. Pt will improve grip strength by 5 lbs to support ADL independence.\n"
            "Long-Term Goals (13–25 visits):\n"
            "1. Pt will perform all basic self-care tasks (feeding, dressing, grooming) independently using AE as needed.\n"
            "2. Pt will manage written tasks (signing name, writing list) without pain or assistance.\n"
            "3. Pt will complete home management activities (cooking, cleaning) safely and independently.\n"
            "4. Pt will maintain hand ROM and strength to participate in meaningful IADLs.",
        "frequency": "1wk1, 2wk12",
        "intervention": "STM, UE TherEx, fine motor/coordination training, adaptive equipment training (built-up utensils, pens, button aids), sensory re-ed, edema management, splinting, ADL/IADL simulation, energy conservation, safety/fall prevention, caregiver training.",
        "procedures": "97165 OT Eval Low Complexity\n97166 OT Eval Moderate Complexity\n97167 OT Eval High Complexity\n97110 TherEx\n97530 TherAct\n97535 ADL Training\n97537 Community/Work Reintegration\n97112 Neuromuscular Re-ed"
    },
    "Knee Pain": {
        "meddiag": "",
        "history": "",
        "subjective": "Pt reports B knee pain resulting in difficulty with daily tasks such as transfers, dressing, bathing, and home management. Pt is agreeable to OT evaluation and would like to improve activity tolerance, safety, and independence with ADLs/IADLs.",
        "pain_location": "Bilateral knees",
        "pain_onset": "",
        "pain_condition": "Chronic knee OA",
        "pain_mechanism": "Degenerative joint changes consistent with osteoarthritis; joint space narrowing and inflammation.",
        "pain_rating": "P: 5/10, B: 0/10, W: 7/10",
        "pain_frequency": "Intermittent; increased after prolonged activity, standing, or transfers.",
        "pain_description": "Sharp, aching, tension, heaviness.",
        "pain_aggravating": "Prolonged walking, sit-to-stand transfers, standing, negotiating stairs, housework.",
        "pain_relieved": "Rest, pain meds, ice, pacing activities, adaptive equipment use.",
        "pain_interferes": "ADLs (dressing, bathing, toileting), IADLs (meal prep, housekeeping), sleep, leisure participation.",
        "meds": "See medication list.",
        "tests": "N/A",
        "dme": "Walker, reacher, sock aid, long-handled shoehorn, tub bench, elevated toilet seat as needed.",
        "plof": "Independent with all mobility, ADLs, and IADLs prior to onset of symptoms.",
        "posture": "Tendency toward forward trunk lean and poor sitting posture due to pain avoidance. Decreased postural awareness with prolonged tasks.",
        "rom": "Hip: WNL\nKnee Flexion/Extension: Limited with pain\nAnkle: WNL",
        "strength": "Hip: 4/5\nKnee Flex: 3/5\nKnee Ext: 3/5\nAnkle: 4/5",
        "palpation": "TTP at medial/lateral joint lines, periarticular swelling and tenderness, warmth, mild effusion noted.",
        "functional": "Transfers: Min A/SBA for toilet, tub, and car transfers\nBed Mobility: SBA\nStair Management: Difficulty with single steps, increased pain\nADL Tasks: Difficulty lower body dressing, standing for grooming\n30 sec Sit-to-Stand: 2 reps with knee pain\nFunctional Squat: Unable",
        "special": "Not tested (refer to ortho as needed)",
        "impairments": "Decreased knee AROM and strength; impaired balance and mobility; pain with weight-bearing and transfers; limited endurance for daily activities.",
        "goals":
            "Short-Term Goals (1–12 visits):\n"
            "1. Pt will report a reduction in knee pain to ≤1/10 to improve ADL task performance and safety.\n"
            "2. Pt will demonstrate ≥10% improvement in knee AROM for greater ease with dressing and self-care tasks.\n"
            "3. Pt will improve LE strength by ≥0.5 muscle grade to facilitate safe transfers and standing ADLs.\n"
            "4. Pt will utilize adaptive strategies/equipment for self-care, reducing pain and risk of falls by 50%.\n"
            "Long-Term Goals (13–25 visits):\n"
            "1. Pt will independently perform all basic ADLs and IADLs with safe body mechanics and minimal pain.\n"
            "2. Pt will complete ≥14 reps on the 30-sec chair sit-to-stand test for improved household mobility.\n"
            "3. Pt will tolerate ≥30 minutes of continuous ADL participation without significant pain or fatigue.\n"
            "4. Pt will demonstrate independence with home exercise/activity modifications and correct adaptive equipment use.",
        "frequency": "1wk1, 2wk12",
        "intervention": "Pain management (education on joint protection, activity pacing), therapeutic exercise for strength and flexibility, ADL/IADL retraining with adaptive equipment, neuromuscular re-education, balance training, functional mobility training, fall prevention strategies, energy conservation, modalities (ice/heat as appropriate), HEP instruction.",
        "procedures": "97165 OT Eval: Low Complexity\n97166 OT Eval: Moderate Complexity\n97167 OT Eval: High Complexity\n97535 Self-Care/Home Management Training\n97110 Therapeutic Exercise\n97530 Therapeutic Activity\n97112 Neuromuscular Re-ed\n97140 Manual Therapy (if trained)"
    }
}


def pt_parse_template(template):
    key_map = {
        "Medical Diagnosis": "meddiag",
        "Medical History/HNP": "history",
        "Subjective": "subjective",
        "Current Medication(s)": "meds",
        "Diagnostic Test(s)": "tests",
        "DME/Assistive Device": "dme",
        "PLOF": "plof",
        "Posture": "posture",
        "ROM": "rom",
        "Muscle Strength Test": "strength",
        "Palpation": "palpation",
        "Functional Test(s)": "functional",
        "Special Test(s)": "special",
        "Current Functional Mobility Impairment(s)": "impairments",
        "Goals": "goals",
        "Frequency/Duration": "frequency",
        "Intervention": "intervention",
        "Treatment Procedures": "procedures",
        "Area/Location of Injury": "pain_location",
        "Onset/Exacerbation Date": "pain_onset",
        "Condition of Injury": "pain_condition",
        "Mechanism of Injury": "pain_mechanism",
        "Pain Rating (P/B/W)": "pain_rating",
        "Pain Frequency": "pain_frequency",
        "Description": "pain_description",
        "Aggravating Factor": "pain_aggravating",
        "Relieved By": "pain_relieved",
        "Interferes With": "pain_interferes"
    }
    fields = {v: "" for v in key_map.values()}
    curr = None
    for line in template.splitlines():
        stripped = line.strip()
        matched = False
        for label, key in key_map.items():
            if stripped.startswith(label + ":"):
                curr = key
                _, val = stripped.split(":", 1)
                fields[key] = val.strip()
                matched = True
                break
        if not matched and curr and stripped:
            fields[curr] += "\n" + stripped
    return fields

def ot_parse_template(template):
    key_map = {
        "Medical Diagnosis": "ot_meddiag",
        "Medical History/HNP": "ot_history",
        "Subjective": "ot_subjective",
        "Current Medication(s)": "ot_meds",
        "Diagnostic Test(s)": "ot_tests",
        "DME/Assistive Device": "ot_dme",
        "PLOF": "ot_plof",
        "Posture": "ot_posture",
        "ROM": "ot_rom",
        "Muscle Strength Test": "ot_strength",
        "Palpation": "ot_palpation",
        "Functional Test(s)": "ot_functional",
        "Special Test(s)": "ot_special",
        "Current Functional Mobility Impairment(s)": "ot_impairments",
        "Goals": "ot_goals",
        "Frequency/Duration": "ot_frequency",
        "Intervention": "ot_intervention",
        "Treatment Procedures": "ot_procedures",
        "Area/Location of Injury": "ot_pain_location",
        "Onset/Exacerbation Date": "ot_pain_onset",
        "Condition of Injury": "ot_pain_condition",
        "Mechanism of Injury": "ot_pain_mechanism",
        "Pain Rating (P/B/W)": "ot_pain_rating",
        "Pain Frequency": "ot_pain_frequency",
        "Description": "ot_pain_description",
        "Aggravating Factor": "ot_pain_aggravating",
        "Relieved By": "ot_pain_relieved",
        "Interferes With": "ot_pain_interferes"
    }
    fields = {v: "" for v in key_map.values()}
    curr = None
    for line in template.splitlines():
        stripped = line.strip()
        matched = False
        for label, key in key_map.items():
            if stripped.startswith(label + ":"):
                curr = key
                _, val = stripped.split(":", 1)
                fields[key] = val.strip()
                matched = True
                break
        if not matched and curr and stripped:
            fields[curr] += "\n" + stripped
    return fields
